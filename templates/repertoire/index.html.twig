{% extends 'base.html.twig' %}

{% block title %}Mon répertoire{% endblock %}

{% block body %}
<header class="page-header">
    <h1>Mon répertoire</h1>
</header>

<form method="POST" action="{{ path('app_repertoire_update') }}" class="app-card">
    <p class="text-muted mb-4">
        Sélectionnez les chants que vous maîtrisez pour qu'ils apparaissent dans votre répertoire personnel.
    </p>

    <div class="row g-3">
        {% for song in allSongs %}
            <div class="col-12 col-md-6 col-lg-4">
                <div class="form-check app-card-light">
                    <input type="checkbox" name="songs[]" value="{{ song.id }}" 
                           id="song{{ song.id }}" class="form-check-input"
                           {% if song in mySongs %}checked{% endif %}>
                    <label class="form-check-label w-100" for="song{{ song.id }}" style="cursor: pointer;">
                        <div class="fw-bold">{{ song.name }}</div>
                        {% if song.types is not empty %}
                            <div class="small text-muted">
                                {% for t in song.types %}
                                    {{ t.name }}{% if not loop.last %}, {% endif %}
                                {% endfor %}
                            </div>
                        {% endif %}
                    </label>
                </div>
            </div>
        {% else %}
            <div class="col-12 text-center text-muted">Aucun chant disponible.</div>
        {% endfor %}
    </div>

    <div class="mt-4 text-end">
        <button type="submit" class="btn btn-primary btn-rounded btn-icon">
            <i class="bi bi-check-lg"></i>
            Sauvegarder mon répertoire
        </button>
    </div>
</form>
{% endblock %}
